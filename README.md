## Настройка контейнеров
Образ воркеров залит в [докерхаб](https://hub.docker.com/repository/docker/exponenci/compare-serializer/general). Поднять все контейнеры можно, если запустить c корня рабочей директрии: 
```
docker-compose up
```
Проверить работоспособность можно, запустив локально скрипт `/client/client.py`.

## Пример запроса
Общение с прокси в формате json.

Запросы: 
``` 
{'method': 'get_result', 'param': <method_name|all>}
```
где `method_name` может принимать значения, указаные в `.env` файле (`METHODS_LIST`).

Пример: 
``` 
# запрос
echo '{"method":"get_result","param":"all"}' | nc -u localhost 2000
```

```
# ответ
{"results": [
    {"status": "ok", "result": "MessagePack-134-7.80mus-2.52mus\n"}, 
    {"status": "ok", "result": "JSON-249-8.55mus-6.32mus\n"}, 
    {"status": "ok", "result": "Native-249-4.99mus-56.01mus\n"}, 
    {"status": "ok", "result": "Protobuf-121-122.60mus-105.17mus\n"}, 
    {"status": "ok", "result": "XML-459-122.19mus-132.49mus\n"}, 
    {"status": "ok", "result": "Avro-100-172.55mus-117.92mus\n"}, 
    {"status": "ok", "result": "YAML-230-897.07mus-1755.67mus\n"}
]}
```

## Код
В директории `/worker` хранится код различных методов сериализации (реализованы все методы), обернутые в сущности `Worker`: когда код запускается, создается класс с нужным сериализатором и начинают прослушиваться 2 сокета (для p2p и мультикастовых запросов); когда приходит запрос от какой-то ноды, воркер запускает эксперимент с имеющимся сериализатором (1000 раз сериализует и десериализует "экспериментальную" структуру из `experimental_meta`) и возвращает результат ноде. 

В директории `/proxy` код прокси-сервера, который принимает udp-запросы на порт 2000 и пересылает их соответствующим воркерам (может переслать мультикастом, если получил соотвутствующий запрос).

Для удобства проверки в `/client` есть код, с помощью которого можно обратиться к прокси-серверу, сделать запрос и посмотреть на результат.
