## Настройка контейнеров
Образ воркеров залит в [докерхаб](https://hub.docker.com/repository/docker/exponenci/compare-serializer/general). Поднять все контейнеры можно, если запустить c корня рабочей директрии: 
```
docker-compose up
```
Проверить работоспособность можно, запустив локально скрипт `/client/client.py`.

## Пример запроса
Общение с прокси в формате json.

Запросы: 
``` 
{'method': 'get_result', 'param': <method_name|all>}
```
где `method_name` может принимать значения, указаные в `.env` файле (`METHODS_LIST`).

Пример: 
``` 
# запрос
echo '{"method":"get_result","param":"all"}' | nc -u localhost 2000
```

```
# ответ
{"results": [
    {"status": "ok", "result": "Avro-160-170.55mus-116.74mus\n"}, 
    {"status": "ok", "result": "JSON-314-9.29mus-7.47mus\n"}, 
    {"status": "ok", "result": "MessagePack-216-17.15mus-3.16mus\n"}, 
    {"status": "ok", "result": "Native-314-6.25mus-60.14mus\n"}, 
    {"status": "ok", "result": "Protobuf-188-132.21mus-105.61mus\n"}, 
    {"status": "ok", "result": "XML-571-122.97mus-129.89mus\n"}, 
    {"status": "ok", "result": "YAML-311-968.50mus-1841.37mus\n"}
]}
```

ps. здесь mus - микросек. За результат взято среднее время за 1000 сериализаций/десериализаций.

## Код
В директории `/worker` хранится код различных методов сериализации (реализованы все методы), обернутые в сущности `Worker`: когда код запускается, создается класс с нужным сериализатором и начинают прослушиваться 2 сокета (для p2p и мультикастовых запросов); когда приходит запрос от какой-то ноды, воркер запускает эксперимент с имеющимся сериализатором (1000 раз сериализует и десериализует "экспериментальную" структуру из `experimental_meta`) и возвращает результат ноде. Тестируемая структура содержит значения следующих типов: bool, int, float, str, также есть список и словарь (где ключи - строки, а знечения - int).


В директории `/proxy` код прокси-сервера, который принимает udp-запросы на порт 2000 и пересылает их соответствующим воркерам (может переслать мультикастом, если получил соотвутствующий запрос).

Для удобства проверки в `/client` есть код, с помощью которого можно обратиться к прокси-серверу, сделать запрос и посмотреть на результат.
